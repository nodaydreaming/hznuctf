<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>CTF平台管理系统--添加题目</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta name="apple-mobile-web-app-status-bar-style" content="black"> 
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        
        <link rel="stylesheet" href="../../../layui/css/layui.css" media="all">
        <link rel="stylesheet" href="../../../layui/css/global.css" media="all">
        <link rel="stylesheet" href="../../../layui/css/modules/layer/default/layer.css" media="all">
        
        <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
        <script src="../js/general.js" charset="utf-8"></script>

        <style>
            .bg-color-menu {
                background-color: #20222A !important;
            }
        </style>

    </head>
    <body>
        <div class="layui-layout layui-layout-admin">
            <!-- 顶部导航栏 -->
            <div class="layui-header header header-demo">
                <div class="layui-main">
                    <a class="" href="../main.html" style="height: 100%; font-size: 20px;color: rgba(255, 255, 255, 0.8); line-height: 57px; font-weight: 500">
                    CTF平台管理系统
                    </a>
                    <div class="layui-form component" lay-filter="LAY-site-header-component"></div>
                    <ul class="layui-nav">
                        <li class="layui-nav-item ">
                        <a href="../../../ctf/home.html">返回前台</a>
                        </li>
                        <li class="layui-nav-item">
                            <a href="javascript:;">
                                <img src="../images/user_default.jpg" class="layui-nav-img">
                                我
                                <span class="layui-nav-more"></span>
                            </a>
                            <dl class="layui-nav-child layui-anim layui-anim-upbit" id="list_cur" style="top: 60px;">
                                <dd style="border: 0px; height: 5px;"></dd>
                                <dd><a onclick="openUpdate()" style="cursor:pointer;">修改信息</a></dd>
                                <dd><a onclick="signOut()" style="cursor:pointer;">退出</a></dd>
                            </dl>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 左侧垂直导航栏 -->
            <div class="layui-side layui-bg-black">
                <div class="layui-side-scroll bg-color-menu">
                    <ul class="layui-nav layui-nav-tree">
                        <li class="layui-nav-item bg-color-menu">
                            <a href="javascript:;"><i class="layui-icon layui-icon-home" style="font-size:16px;"></i>&nbsp;&nbsp;平台管理</a>
                            <dl class="layui-nav-child">
                                <dd class="">
                                    <a href="../platform/carousels_list.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;轮播图管理</a>
                                </dd>
                                <dd class="">
                                    <a href="../platform/announcement.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;公告管理</a>
                                </dd>
                            </dl>
                        </li>
                        
                        <li class="layui-nav-item bg-color-menu">
                            <a href="javascript:;"><i class="layui-icon layui-icon-flag" style="font-size:16px;"></i>&nbsp;&nbsp;赛事管理</a>
                            <dl class="layui-nav-child">
                                <dd class="">
                                    <a href="../contest/add_contest.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建赛事</a>
                                </dd>
                                <dd class="">
                                    <a href="../contest/contest_list.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;赛事列表</a>
                                </dd>
                                <dd class="">
                                    <a href="../contest/highlight_list.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;精彩瞬间</a>
                                </dd>
                            </dl>
                        </li>
                        
                        <li class="layui-nav-item layui-nav-itemed bg-color-menu">
                            <a href="javascript:;"><i class="layui-icon layui-icon-template-1" style="font-size:16px;"></i>&nbsp;&nbsp;题目管理</a>
                            <dl class="layui-nav-child">
                                <dd class="layui-this">
                                    <a href="#">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;添加题目</a>
                                </dd>
                                <dd class="">
                                    <a href="problem_set.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;题目列表</a>
                                </dd>
                                <dd class="">
                                    <a href="problem_type.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;题目类型</a>
                                </dd>
                            </dl>
                        </li>
                        
                        <li class="layui-nav-item bg-color-menu">
                            <a href="javascript:;"><i class="layui-icon layui-icon-user" style="font-size:16px;"></i>&nbsp;&nbsp;用户管理</a>
                            <dl class="layui-nav-child">
                                <dd class="">
                                    <a href="../user/add_user.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;添加用户</a>
                                </dd>
                                <dd class="">
                                    <a href="../user/user_list.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户列表</a>
                                </dd>
                            </dl>
                        </li>
                        <li class="layui-nav-item bg-color-menu">
                            <a href="javascript:;"><i class="layui-icon layui-icon-set" style="font-size:16px;"></i>&nbsp;&nbsp;管理员信息</a>
                            <dl class="layui-nav-child">
                                <dd class="">
                                    <a href="../admin/add_admin.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;添加管理员</a>
                                </dd>
                                <dd class="">
                                    <a href="../admin/admin_list.html">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;管理员列表</a>
                                </dd>
                            </dl>
                        </li>
                        
                        <!-- <li class="layui-nav-item" style="height: 30px; text-align: center"></li> -->
                    </ul>
                </div>
            </div>

            <!-- 主体内容 -->
            <div class="layui-body" id="LAY_app_body">
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend>添加题目</legend>
                </fieldset>
                <form class="layui-form" action="" style="margin:50px 0 0 5%; font-size:15px">
                    <div class="layui-form-item">
                        <label class="layui-form-label">题目名称</label>
                        <div class="layui-input-block">
                            <input type="text" id="problem_title" autocomplete="off" placeholder="请输入题目标题" required class="layui-input" style="width: 50%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                    </div>

                    <div class="layui-inline layui-form-item" style="margin-top:1%" id="type">
                        <label class="layui-form-label">题目类型</label>
                        <div class="layui-input-inline" id="type1">
                            <select name="modules" onchange="checkWeb()">
                                <option value="">请选择</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-form-item" style="margin-top:1%">
                        <label class="layui-form-label">题目内容</label>
                        <div class="layui-input-block">
                            <textarea class="tcp_content layui-textarea" placeholder="请输入题目内容" style="width: 50%;" maxlength="500" 
                            onchange="textarea_fun()" onkeydown="textarea_fun()" onkeyup="textarea_fun()"></textarea>
                            <span class="t_h" style="float: left; margin-left: 45%"><i>0</i>/500</span>
                        </div>
                    </div>
                    
                    <div class="layui-form-item layui-upload" style="margin-top:1%">
                        <label class="layui-form-label">题目资源</label>
                        <button type="button" class="layui-btn layui-btn-normal" id="testList">选择多文件</button> 
                        <div class="layui-upload-list" style="width: 90%; padding-left: 30px;">
                          <table class="layui-table">
                            <thead>
                              <tr><th>文件名</th>
                              <th>大小</th>
                              <th>答案</th>
                              <th>状态</th>
                              <th>操作</th>
                            </tr></thead>
                            <tbody id="demoList"></tbody>
                          </table>
                        </div>
                        <button type="button" class="layui-btn" id="testListAction" style="margin-left: 30px;">开始上传</button>
                    </div>

                    <div class="layui-form-item" id="webDiv" style="border: 1px solid gainsboro">
                        <p style="font-size: large; margin: 15px 0 15px 30px;">web题目链接</p>
                        
                        <label class="layui-form-label" style="text-align: center;">链接</label>
                        <div class="layui-input-block">
                            <input type="text" id="link" lay-verify="required" name="link" autocomplete="off" placeholder="请输入链接" class="layui-input" style="width: 500px; margin-bottom: 20px;">
                        </div>
                        
                        <label class="layui-form-label" style="text-align: center;">答案</label>
                        <div class="layui-input-block">
                            <input type="text" id="ans" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input" style="width: 500px; margin-bottom: 20px;">
                            <button type="button" class="layui-btn layui-btn-normal" onclick="add()" id="linkList">添加到表格</button>
                        </div>
                        
                        
                        <div class="" style="padding-left: 30px;">
                            <table class="layui-table" id="tab" style="width: 90%;">
                                <thead id="tb">
                                    <tr>
                                        <th style="width: 10%;">序号</th>
                                        <th style="width: 40%;">链接</th>
                                        <th style="width: 40%;">答案</th>
                                        <th style="width: 10%;">操作</th>
                                    </tr
                                ></thead>
                                <tbody id="linksList"></tbody>
                            </table>
                        </div>
                        
                    </div>

                    <div class="layui-form-item layui-upload" style="margin-top:1%">
                        <label class="layui-form-label">题目脚本</label>
                        <button type="button" class="layui-btn layui-btn-normal" id="upload">
                        <i class="layui-icon layui-icon-upload"></i>选择文件</button>
                        <input class="layui-upload-file" type="file" name="file">
                    </div>

                    <div class="layui-form-item" style="margin-top:2.5%">
                        <label class="layui-form-label">题目作者</label>
                        <div class="layui-input-block">
                        <input type="text" id="problem_author" autocomplete="off" placeholder="请输入题目作者" required class="layui-input" style="width: 30%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                    </div>

                    <div class="layui-form-item" style="margin-top:2.5%">
                        <label class="layui-form-label">题目答案</label>
                        <div class="layui-input-block">
                        <input type="text" id="problem_answer" autocomplete="off" placeholder="请输入题目答案" required class="layui-input" style="width: 50%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                    </div>

                    <div class="layui-form-item" style="margin-top:2.5%">
                        <div class="layui-input-inline" style="width:30%">
                            <label class="layui-form-label">题目分值</label>
                            <input type="number" id="problem_sorce" autocomplete="off" required class="layui-input" style="width: 50%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                        <div class="layui-input-inline" style="width:30%">
                            <label class="layui-form-label">附加分</label>
                            <input type="number" id="problem_additional_sorce" autocomplete="off" required class="layui-input" style="width: 50%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                        <div class="layui-input-inline" style="width:30%">
                            <label class="layui-form-label">降分幅度</label>
                            <input type="number" id="problem_sorce_float" autocomplete="off" required class="layui-input" style="width: 50%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                    </div>

                    <div class="layui-form-item" style="margin-top:2.5%">
                        <label class="layui-form-label">题目难度</label>
                        <div class="layui-input-block">
                            <input type="number" id="problem_level" autocomplete="off" placeholder="题目难度，请输入1-100之间的整数" required class="layui-input" style="width: 30%;" onchange="inputLimit()" onkeydown="inputLimit()" onkeyup="inputLimit()">
                        </div>
                    </div>

                    <div class="layui-inline layui-form-item" style="margin-top:1%" id="toWho">
                        <label class="layui-form-label">开放对象</label>
                        <div class="layui-input-inline" id="towho1">
                            <select name="module" >
                                <option value="">请选择开放对象</option>
                                <option value="0">全员</option>
                                <option value="1">比赛</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-input-block" style="margin-top:3.5%">
                        <button type="button" class="layui-btn" onclick="add_problem()">立即提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary" style="margin-left: 5%" onclick="$('.layui-upload-choose').remove();">重置</button>
                    </div>
                </form>
            </div>

        </div>

        <!-- 引入或者加载脚本 -->
        <script src="../../../layui/layui.all.js" charset="utf-8"></script>
        <script src="js/add_problem.js" charset="utf-8"></script>
        <div id="LAY_democodejs">
            <script>
                var form = layui.form,layer = layui.layer;
                var $ = layui.$;
                var element = layui.element;

                var uploadInst;
                var problem_resources= "", problem_answers = "", problem_script = "", problem_links = "";
                var problem_title, problem_level, problem_type, problem_description, problem_author;
                var problem_sorce, problem_additional_sorce, problem_sorce_float, problem_towho;
                layui.use('form', function(){
                    var form = layui.form;
                    /*fillProblemTypeSelect();*/
                    form.on('select', function(data){
                        $(data.elem).trigger('change', data.elem);
                    });
                });

                function checkWeb(){
                    var temType = $("#type").find('.layui-this').text();
                    var answerDiv = $("#problem_answer").parent().parent();
                    //console.log(temType);
                    if(temType == "Web"){
                        //修改资源上传部分为：题目链接+答案
                        $(".layui-form-item.layui-upload")[0].className += " layui-hide";
                        $("#webDiv")[0].className = "layui-form-item";
                        answerDiv[0].className = "layui-form-item layui-hide";
                    }
                    else{
                        answerDiv[0].className = "layui-form-item layui-hide";
                        $("#webDiv")[0].className = "layui-form-item layui-hide";
                        //还原资源上传部分
                        var hideDiv = $(".layui-form-item.layui-upload.layui-hide");
                        if(hideDiv.length != 0){
                            hideDiv[0].className = "layui-form-item layui-upload";
                        }
                    
                    }
                }

                var link, ans;
                var id=1;

                function add() {
                    link=$("#link").val();
                    ans=$("#ans").val();
                    if(link==''){
                        layer.msg("链接不能为空！");
                        return false;
                    }
                    else if(ans==''){
                        layer.msg("答案不能为空！");
                        return false;
                    }
                    var trObj = document.createElement("tr");
                    trObj.id = new Date().getTime();
                    trObj.innerHTML = "<td><input type='hidden' name='"+id+"' value='"+id+"'>"+id+"</td>" +
                                    "<td>"+link+"</td>"+
                                    "<td>"+ans+"</td>"+
                                    "<td> <button onclick='deleteLink(this)' class='layui-btn layui-btn-xs layui-btn-danger'>删除</button></td>";
                    document.getElementById("tb").appendChild(trObj);
                    id++;

                    $("#link").val("");
                    $("#ans").val("");
                }

                function deleteLink(obj) {
                    var trId = obj.parentNode.parentNode.id;
                    var trObj = document.getElementById(trId);
                    document.getElementById("tb").removeChild(trObj);
                }

                layui.use('upload', function() {
                    var $ = layui.jquery, upload = layui.upload;
                    
                    uploadInst = upload.render({
                        elem: '#upload'
                        , url: '../../../file/problemScriptUpload'
                        , accept : 'file'
                        , multiple : false
                        , auto : false
                        , field : 'file'
                        , choose: function (obj) {
                            //预读本地文件示例，不支持ie8 +
                            obj.preview(function (index, file, result) {
                                var span = document.createElement("span");
                                span.className = "layui-inline layui-upload-choose";
                                span.innerText=file.name;
                                document.getElementsByClassName("layui-upload")[1].appendChild(span);
                            });
                        }
                        , done: function (res) {
                            //如果上传失败
                            if (res.status == "error") {
                                return layer.msg('上传失败');
                            }
                            //上传成功
                            else{
                                problem_script = res.src;
                                add_Problem(problem_title, problem_type, problem_level, problem_description, problem_resources, problem_script, problem_answers, problem_links,problem_author, problem_sorce, problem_additional_sorce, problem_sorce_float,problem_towho);
                            }
                        }
                        , error: function () {
                            //演示失败状态，并实现重传
                            var demoText = $('#demoText');
                            demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                            demoText.find('.demo-reload').on('click', function () {
                                uploadInst.upload();
                            });
                    }
                    });
                });
                
                layui.use('upload', function(){
                    var $ = layui.jquery, upload = layui.upload;
                    //多文件列表示例
                    var demoListView = $('#demoList')
                    ,uploadListIns = upload.render({
                        elem: '#testList'
                        ,url: '../../../file/problemResourceUpload' //改成您自己的上传接口
                        ,accept: 'file'
                        ,multiple: true
                        ,auto: false
                        ,bindAction: '#testListAction'
                        ,choose: function(obj){
                            var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                            //读取本地文件
                            obj.preview(function(index, file, result){
                                var tr = $(['<tr id="upload-'+ index +'">'
                                ,'<td>'+ file.name +'</td>'
                                ,'<td>'+ (file.size/1024).toFixed(1) +'kb</td>'
                                ,'<td><input type="text" autocomplete="off" placeholder="请输入对应答案" required class="layui-input"/></td>'
                                ,'<td>等待上传</td>'
                                ,'<td>'
                                    ,'<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'
                                    ,'<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'
                                ,'</td>'
                                ,'</tr>'].join(''));
                                
                                //单个重传
                                tr.find('.demo-reload').on('click', function(){
                                    obj.upload(index, file);
                                });
                                
                                //删除
                                tr.find('.demo-delete').on('click', function(){
                                    delete files[index]; //删除对应的文件
                                    tr.remove();
                                    uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                                });
                                demoListView.append(tr);
                                problem_resources = "";
                            });
                        }
                        ,done: function(res, index, upload){
                            if(res.src != ""){ //上传成功
                                problem_resources += res.src + ",";
                                var tr = demoListView.find('tr#upload-'+ index)
                                ,tds = tr.children();
                                tds.eq(3).html('<span style="color: #5FB878;">上传成功</span>');
                                //tds.eq(3).html(''); //清空操作
                                return delete this.files[index]; //删除文件队列已经上传成功的文件
                            }
                            this.error(index, upload);
                        }
                        ,error: function(index, upload){
                            console.log(index);
                            var tr = demoListView.find('tr#upload-'+ index)
                            ,tds = tr.children();
                            tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                            tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
                        }
                        ,allDone: function(obj){ //当文件全部被提交后，才触发
                            checkAnswer();
                        }
                    });
                });

                function checkAnswer(){
                    var answerInputs = $(".layui-upload-list").find(".layui-input");
                    problem_answers = "";
                    for(var i=0; i<answerInputs.length;++i){
                        if(answerInputs[i].value != null && answerInputs[i].value != ""){
                            problem_answers += answerInputs[i].value + ",";
                        }
                        else{
                            layer.msg("题目答案不能为空！");
                        }
                    }
                }

                function add_problem(){
                    //针对web题获取web链接与对应的答案
                    if($("#tab tr").length > 1){
                        problem_links = "";
                        problem_answers = "";
                        var trs = $("#tab tr");
                        for(var i=1; i<trs.length; ++i){
                            var tds = trs[i].children;
                            problem_links += tds[1].innerText + ",";
                            problem_answers += tds[2].innerText + ",";
                        }
                    }
                    problem_title = $("#problem_title").val();
                    problem_type = $("#type").find('.layui-this').attr("lay-value"); 
                    problem_description = $(".tcp_content").val();
                    problem_author = $("#problem_author").val();
                    if(problem_answers == "" || problem_answers == null){
                        problem_answers = $("#problem_answer").val();
                    }
                    problem_sorce = $("#problem_sorce").val();
                    problem_additional_sorce = $("#problem_additional_sorce").val();
                    problem_sorce_float = $("#problem_sorce_float").val();
                    problem_level = $("#problem_level").val();
                    problem_towho= $("#toWho").find('.layui-this').attr("lay-value");

                    if(problem_title == "" || problem_title == null){
                        layer.msg("题目名称不能为空！");
                    }
                    else if(problem_type == "" || problem_type == null){
                        layer.msg("题目类型不能为空！");
                    }
                    else if(problem_description == "" || problem_description == null){
                        layer.msg("题目内容不能为空！");
                    }
                    else if(problem_author == "" || problem_author == null){
                        layer.tips("题目作者不能为空！", "#problem_author");
                    }
                    else if(problem_answers == "" || problem_answers == null){
                        layer.tips("题目答案不能为空！", "#problem_answer");
                    }
                    else if(problem_sorce == "" || problem_sorce == null){
                        layer.tips("题目分值不能为空！", "#problem_sorce");
                    }
                    else if(problem_additional_sorce == "" || problem_additional_sorce == null){
                        layer.tips("题目附加分不能为空！", "#problem_additional_sorce");
                    }
                    else if(problem_sorce_float == "" || problem_sorce_float == null){
                        layer.tips("题目降分幅度不能为空！", "#problem_sorce_float");
                    }
                    else if(problem_level == "" || problem_level == null){
                        layer.tips("题目难度不能为空！", "#problem_level");
                    }
                    else if(problem_towho == "" || problem_towho == null){
                        layer.tips("开放对象不能为空！", "#towho1");
                    }
                    else if($(".layui-upload-choose").length > 0) {
                        uploadInst.upload();
                    }
                    else{
                        add_Problem(problem_title, problem_type, problem_level, problem_description, problem_resources, problem_script, problem_answers, problem_links,problem_author, problem_sorce, problem_additional_sorce, problem_sorce_float,problem_towho);
                    }
                }
                
                function add_Problem(problem_title, problem_type, problem_level, problem_description, problem_resources, problem_script, problem_answers, problem_links,problem_author, problem_sorce, problem_additional_sorce, problem_sorce_float,problem_towho){
                    var mydata = {"questionTitle" : problem_title, 
                                "questionTypeid" : problem_type,
                                "questionBody" : problem_description, 
                                "questionResources" : problem_resources,
                                "questionScript" : problem_script,
                                //"questionLinks" : problem_links,
                                "questionAnswers" : problem_answers,
                                "questionAuthor" : problem_author, 
                                "questionPoint" : parseInt(problem_sorce),
                                "questionAdditional" : parseInt(problem_additional_sorce),
                                "questionDecrease" : parseFloat(problem_sorce_float),
                                "questionLevel" : parseInt(problem_level),
                                "toWho" : problem_towho};
                    console.log(mydata);

                    $.ajax({ 
                        url : '../../../question/insert',
                        type : 'post',
                        scriptCharset : 'utf-8',
                        data : {"questionTitle" : problem_title, 
                                "questionTypeid" : problem_type,
                                "questionBody" : problem_description, 
                                "questionResources" : problem_resources,
                                "questionScript" : problem_script,
                                "questionLinks" : problem_links,
                                "questionAnswers" : problem_answers,
                                "questionAuthor" : problem_author, 
                                "questionPoint" : parseInt(problem_sorce),
                                "questionAdditional" : parseInt(problem_additional_sorce),
                                "questionDecrease" : parseFloat(problem_sorce_float),
                                "questionLevel" : parseInt(problem_level),
                                "toWho" : problem_towho},
                        success : function (result) {
                            if(result.status == "success"){
                                layer.open({
                                    type: 1,
                                    offset: 'auto',
                                    id: 'layerDemo1', //防止重复弹出
                                    content: '<div style="padding: 20px 100px;">' + "添加题目成功！" + '</div>',
                                    btn: '关闭',
                                    btnAlign: 'c', //按钮居中
                                    shade: 0.5, //不显示遮罩
                                    title: "HZNUCTF",
                                    yes: function () {
                                        problem_resources = "";
                                        problem_script = "";
                                        problem_answers = "";
                                        problem_links = "";
                                        $(".demo-delete").click();
                                        $(".layui-btn.layui-btn-xs.layui-btn-danger").click()
                                        layer.closeAll();
                                    }
                                });
                                $('.layui-btn-primary')[0].click();
                            }
                            else {
                                layer.msg(result.message);
                            }
                        },
                        error : function () {
                            layer.msg("请求添加失败！");
                        }
                    });
 
                }
                
                layui.use('element', function(){
                    var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
                    //监听导航点击
                    element.on('nav(demo)', function(elem){
                        //console.log(elem)
                        layer.msg(elem.text());
                    });
                });
            
            </script>
        </div>
    </body>
</html>